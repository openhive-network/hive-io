image: node:latest

stages:
  - build

cache:
  untracked: true
  key: "$CI_PROJECT_ID"
  paths:
    - node_modules/
    - _site/vendor/
    - .bundled/
    - .yarn

build:
  stage: build
  script:
    - ls -l
    - yarn config set cache-folder .yarn
    - yarn install
    - yarn generate
    - echo "BUILD SUCCESSFULLY"

  artifacts:
    paths:
      - dist/
    expire_in: 20 mins
  environment:
    name: development
  only:
    - develop
